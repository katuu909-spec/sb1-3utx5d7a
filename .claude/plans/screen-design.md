# 風量測定アプリ - 画面遷移・UI設計計画

## 概要
要件定義書に基づいて、3階層データ構造（製造番号 → 測定箇所 → 測定点）に対応した画面遷移図とUIパターン設計を作成する。

---

## 画面遷移フロー

### 全体構成（8画面）

```
1. ホーム画面
   ├─ 既存案件一覧（製造番号ごと）
   └─ [新規測定] ボタン
       ↓
2. 製造番号入力画面
   ├─ 製造番号入力
   ├─ 機種型式入力
   ├─ 機種番号入力
   └─ [次へ] ボタン
       ↓
3. 測定箇所一覧画面
   ├─ 製造番号・機種情報表示（ヘッダー）
   ├─ 測定箇所リスト
   └─ [新規測定箇所追加] ボタン
       ├─→ 4. 測定箇所作成画面
       │    ├─ 測定箇所名入力
       │    ├─ 縦寸法入力（mm）
       │    ├─ 横寸法入力（mm）
       │    ├─ 測定点数設定
       │    └─ [確定] ボタン
       │        ↓（戻る）
       │
       └─→ 既存測定箇所をタップ
            ↓
5. 測定点撮影画面
   ├─ 現在の進捗表示（X / 全測定点数）
   ├─ [撮影] ボタン
   └─ 撮影後フロー：
       ├─ 画像プレビュー表示
       ├─ [再撮影] or [確定] ボタン
       ├─ [確定] で OCR実行
       │    ↓
       └─ 6. OCR結果確認画面
           ├─ 取得したAve値表示
           ├─ 手動修正フィールド（読み取り失敗時のみ）
           └─ [確定] or [再撮影] ボタン
               ├─ [再撮影] → 5に戻る
               └─ [確定] → 次の測定点へ
                    ├─ 測定点数未完了 → 5に戻る
                    └─ 測定点数完了 → 7へ
                        ↓
7. 測定結果確認画面
   ├─ ステータス表示（「概算」or「確定」）
   ├─ 製造番号、機種情報、測定日
   ├─ 測定箇所名、面積
   ├─ 各測定点のAve風速
   ├─ 平均風速
   ├─ 風量（概算/確定）
   └─ [保存] ボタン
       ↓
8. 保存確認画面
   ├─ 最終確認メッセージ
   ├─ 「保存後は編集不可」警告表示
   └─ [確定] or [戻る] ボタン
       └─ [確定] で保存完了 → ホーム画面へ
```

---

## 各画面のUIパターン設計

### 1. ホーム画面
- **目的**: 既存案件一覧表示 + 新規測定開始
- **レイアウト**:
  - ヘッダー：アプリロゴ・タイトル
  - メインエリア：案件カード一覧（スクロール可能）
    - 各カード：製造番号、機種型式、測定日、進捗状況
  - フローティングボタン：「新規測定」ボタン

### 2. 製造番号入力画面
- **目的**: 測定の初期情報を入力
- **レイアウト**:
  - フォーム：
    - 製造番号（テキスト入力）
    - 機種型式（テキスト入力）
    - 機種番号（テキスト入力）
  - 「次へ」ボタン（バリデーション必須）
  - 「キャンセル」ボタン

### 3. 測定箇所一覧画面
- **目的**: 製造番号配下の測定箇所管理
- **レイアウト**:
  - ヘッダー：製造番号、機種型式
  - メインエリア：測定箇所リスト
    - 各リスト項目：
      - 測定箇所名
      - 面積（mm²）
      - 進捗表示（X / Y測定点完了）
  - フローティングボタン：「新規測定箇所追加」

### 4. 測定箇所作成画面
- **目的**: 新しい測定箇所の条件設定
- **レイアウト**:
  - フォーム：
    - 測定箇所名（テキスト入力 or ラジオボタン選択式）
    - 縦寸法（数値入力 + mm表示）
    - 横寸法（数値入力 + mm表示）
    - 測定点数（数値入力）
  - リアルタイム計算表示：面積 = 縦 × 横 mm²
  - 「確定」「キャンセル」ボタン

### 5. 測定点撮影画面
- **目的**: 風速計画面の撮影
- **レイアウト**:
  - ヘッダー：進捗インジケーター（「測定点 X / Y」）
  - メインエリア：「撮影」ボタン（大きく目立つ）
  - ナビゲーション：「戻る」ボタン

### 6. OCR結果確認画面
- **目的**: OCR読み取り結果の確認・修正
- **レイアウト**:
  - 撮影画像表示（プレビュー）
  - OCR読み取り結果表示：
    - 「Ave（平均風速）: 〇〇 m/s」（大きく表示）
  - 修正フィールド（読み取り失敗時のみ表示）
  - ボタン：「再撮影」「確定」

### 7. 測定結果確認画面
- **目的**: 全測定データの確認
- **レイアウト**:
  - ステータスバッジ「概算」or「確定」
  - セクション分け：基本情報、測定箇所情報、測定点データ、計算結果
  - 「保存」ボタン（プライマリカラー）

### 8. 保存確認画面
- **目的**: 最終確認
- **レイアウト**:
  - 警告メッセージ：「保存後は編集不可」
  - 確認チェックボックス
  - 「保存する」「戻る」ボタン

---

## UI設計の原則

### 色彩設計
- **プライマリ**：青系（blue-600）→ CTA（確定、保存）
- **セカンダリ**：グレー系（gray-500）→ キャンセル、戻る
- **警告**：赤系（red-500）→ 再撮影
- **背景**：白/グレー系

### タイポグラフィ
- **タイトル**：18-24px bold
- **本文**：14-16px
- **キャプション**：12px

### スペーシング
- 8pxグリッドシステム
- セクション間：16px

### アイコン
- Lucide React使用
- Camera、Plus、ChevronRight、Check、X など

---

## 実装ポイント

1. **画面コンポーネント構成**
   - 各画面を独立したコンポーネントに
   - 共通ヘッダー・フッターコンポーネント

2. **状態管理**
   - 現在の測定セッション（製造番号、測定箇所、測定点）をグローバル状態で管理
   - IndexedDBまたはローカルストレージで永続化

3. **ナビゲーション**
   - React Router v6 でルーティング管理
   - 画面遷移時のバリデーション（次画面に必要なデータが揃っているか確認）

4. **フォーム管理**
   - React Hook Formまたは手動バリデーション

---

## 次のステップ
1. ユーザーからの確認・フィードバック
2. データベース設計（ER図）を作成
3. 実装開始
